<!-- First Page for Ordine -->
<!-- Here you can view element list and use searches to filter them -->
<div class="container">
    <div class="content">
        <!-- Mat Card -->
        <mat-card>
            <!-- Card Header -->
            <mat-card-header fxLayout="row" fxLayoutAlign="space-between center">
                <mat-card-title>{{ 'voila3sample.detail.Ordine.label' | translate }}</mat-card-title>
                <!-- Quick Filter -->
                <form class="quick" name="searchOrdineForm" [formGroup]="searchOrdineForm" (keyup)="onUp()" fxLayout="column" fxLayoutGap="20" fxFlex>
                    <!-- Full Text Search based on Created By -->
                    <rsd-input-text formControlName="createdBy" iconSuffix="search"></rsd-input-text>
                </form>
                <!-- Search Dialog Button -->
                <button mat-icon-button (click)="openDialogResid()" matTooltip="Ricerca Avanzata con Resid" [color]="filters === '' ? 'basic' : 'warn'">
                    <mat-icon matBadgeSize="small" [matBadge]="filters === '' ? '' : '!'" matBadgeColor="accent"> filter_list </mat-icon>
                </button>
                <!-- Advanced Search Dialog Button -->
                <button mat-icon-button (click)="openDialogResidAdvanced()" matTooltip="Ricerca Avanzata con Resid Avanzata" [color]="filters === '' ? 'basic' : 'warn'">
                    <mat-icon matBadgeSize="small" [matBadge]="filters === '' ? '' : '!'" matBadgeColor="accent"> filter_list </mat-icon>
                </button>
            </mat-card-header>

            <mat-card-content class="overflow" autosize>
                <!-- Numero theOrdine trovati -->
                <!-- Elementi totali: {{totalRows}} -->
                <mat-progress-bar mode="indeterminate" *ngIf="isLoading"></mat-progress-bar>

                <!-- Tabella tipo ordine -->
                <table aria-label="ordine's table" mat-table [dataSource]="dataSource" matSort>
                    <!-- Id Ordine -->
                    <ng-container matColumnDef="idOrdine">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.idOrdine' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.idOrdine }}</td>
                    </ng-container>
                    <!-- Data Ordine -->
                    <ng-container matColumnDef="dataOrdine">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.dataOrdine' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.dataOrdine | date: 'dd/MM/yyyy' }}</td>
                    </ng-container>
                    <!-- Tempo Ordine -->
                    <ng-container matColumnDef="tempoOrdine">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.tempoOrdine' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.tempoOrdine }}</td>
                    </ng-container>
                    <!-- Created By -->
                    <ng-container matColumnDef="createdBy">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.createdBy' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.createdBy }}</td>
                    </ng-container>
                    <!-- Last Modified By -->
                    <ng-container matColumnDef="lastModifiedBy">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.lastModifiedBy' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.lastModifiedBy }}</td>
                    </ng-container>
                    <!-- Created Date -->
                    <ng-container matColumnDef="createdDate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.createdDate' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.createdDate | date: 'dd/MM/yyyy HH:mm:ss' }}</td>
                    </ng-container>
                    <!-- Last Modified Date -->
                    <ng-container matColumnDef="lastModifiedDate">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.lastModifiedDate' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.lastModifiedDate | date: 'dd/MM/yyyy HH:mm:ss' }}</td>
                    </ng-container>
                    <!-- Cliente-->
                    <ng-container matColumnDef="theCliente.ThePersonaKey">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.theClienteObjectKey' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.theClienteObjectTitle }}</td>
                    </ng-container>
                    <!-- Tipo Ordine-->
                    <ng-container matColumnDef="theTipoOrdine.TheOrdine.idOrdine">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.theTipoOrdineObjectKey' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.theTipoOrdineObjectTitle }}</td>
                    </ng-container>
                    <!-- Ordine Aggregato-->
                    <ng-container matColumnDef="theOrdineAggregato.idOrdine">
                        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{ 'voila3sample.detail.Ordine.theOrdineAggregatoObjectKey' | translate }}</th>
                        <td mat-cell *matCellDef="let ordine">{{ ordine.theOrdineAggregatoObjectTitle }}</td>
                    </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row (click)="isClickable(Privileges?.ORDINE_READ) && navigateToView(row.objectKey)" *matRowDef="let row; columns: displayedColumns"></tr>
                </table>
            </mat-card-content>

            <!-- Card Footer -->
            <mat-card-footer>
                <!-- Pagination component -->
                <mat-paginator
                    #paginator
                    [length]="totalRows"
                    [pageIndex]="currentPage"
                    [pageSize]="pageSize"
                    [pageSizeOptions]="pageSizeOptions"
                    (page)="pageChanged($event)"
                    aria-label="Select page"
                    showFirstLastButtons
                >
                </mat-paginator>
            </mat-card-footer>
        </mat-card>
    </div>

    <div class="footer" fxLayout="row" fxLayoutAlign="start center" fxLayoutGap="15px">
        <!-- Redirect to Selected Element -->
        <button *ngIf="Privileges?.ORDINE_CREATE | Permission" mat-raised-button color="primary" class="margin-8" routerLink="/pages/voila3sample/ordine/detail-ordine/new">
            {{ 'buttons.new' | translate: { '0': '' | translate } }}
        </button>
        <!--Export xlxs-->
        <button *ngIf="Privileges?.ORDINE_REPORT | Permission" mat-raised-button color="primary" class="margin-8" (click)="printXlsxReport()">
            {{ 'buttons.export.xlxs' | translate }}
        </button>
    </div>
</div>
